"use strict";var _createClass=function(){function i(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var e=function(){function t(e){_classCallCheck(this,t);this.options=this.set_options({selection:".selection",selected_class_name:"selected",select_box_class_name:"select-box"},e),this.is_dragging=[],this.selected_items=[],this.start_x=0,this.start_y=0,this.select_box=document.createElement("div")}return _createClass(t,[{key:"set_options",value:function(e,t){var s=void 0,i={};for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);for(s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i}},{key:"attach",value:function(){this.build_select_box(),this.hide_select_box(),this.bind_events(),document.getElementsByTagName("body")[0].appendChild(this.select_box)}},{key:"build_select_box",value:function(){this.select_box.className=this.options.select_box_class_name,this.select_box.style.position="absolute",this.select_box.style.left="0",this.select_box.style.top="0",this.select_box.style.width="0",this.select_box.style.height="0"}},{key:"show_select_box",value:function(){this.select_box.style.display="block"}},{key:"hide_select_box",value:function(){this.select_box.style.display="none"}},{key:"bind_events",value:function(){document.addEventListener("selectstart",this.on_select_start.bind(this)),document.addEventListener("mousedown",this.on_mouse_down.bind(this))}},{key:"on_select_start",value:function(e){e.preventDefault()}},{key:"on_mouse_down",value:function(e){var t=this;this.is_dragging=!0,this.start_x=e.pageX,this.start_y=e.pageY,this.selected_items=this.build_items(document.querySelectorAll(this.options.selection)),this.build_select_box(),this.show_select_box(),document.addEventListener("mouseup",this.on_mouse_up.bind(this)),setTimeout(function(){if(!t.is_dragging)return!1;document.addEventListener("mousemove",t.on_mouse_move.bind(t))},100)}},{key:"on_mouse_up",value:function(e){this.is_dragging=!1,this.selected_items=[],this.hide_select_box(),document.removeEventListener("mousemove",this.on_mouse_move.bind(this)),document.removeEventListener("mouseup",this.on_mouse_up.bind(this))}},{key:"on_mouse_move",value:function(e){var t=e.pageX,s=e.pageY,i=Math.min(this.start_y,s),n=Math.min(this.start_x,t),o=Math.abs(this.start_x-t),l=Math.abs(this.start_y-s);this.select_box.style.top=i+"px",this.select_box.style.left=n+"px",this.select_box.style.width=o+"px",this.select_box.style.height=l+"px",this.set_selected_items(i,n,o,l)}},{key:"set_selected_items",value:function(t,s,i,n){var o=this;this.selected_items.forEach(function(e){o.is_element_selected(e.element,t,s,i,n)?e.is_selected?e.element.classList.remove(o.options.selected_class_name):e.element.classList.add(o.options.selected_class_name):e.is_selected?e.element.classList.add(o.options.selected_class_name):e.element.classList.remove(o.options.selected_class_name)})}},{key:"is_element_selected",value:function(e,t,s,i,n){return e.offsetLeft>=s&&e.offsetTop>=t&&e.offsetLeft+e.offsetWidth<=s+i&&e.offsetTop+e.offsetHeight<=t+n}},{key:"build_items",value:function(e){var t=this;return Array.prototype.map.call(e,function(e){return{element:e,is_selected:e.classList.contains(t.options.selected_class_name)}})}}]),t}();window||(window={}),window.DragEnSelect||(window.DragEnSelect={}),window.DragEnSelect=e}();